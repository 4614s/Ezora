<!DOCTYPE html>  
<html>  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <meta http-equiv="X-UA-Compatible" content="ie=edge">  
  <script src="https://cdn.jsdelivr.net/gh/4614s/ezoradom-the-functions@main/CDN/v1.1.fast.js"></script>  
  <script src="https://cdn.tailwindcss.com"></script>  
  <style type="text/tailwindcss">  
    body {  
     @apply bg-gray-50 font-sans selection:bg-blue-500 selection:text-white;  
    }  
  
    li {  
     @apply break-words bg-white text-gray-800 px-4 py-3 my-2 rounded-md shadow ring-1 ring-gray-300 hover:ring-gray-500 transition duration-150 w-[80vw] sm:w-[75vw] md:w-[55vw] lg:w-[40vw] xl:w-[37vw] 2xl:w-[35vw] mx-auto flex justify-between;  
    }  
  
    span {  
     @apply text-red-500 font-semibold hover:text-red-700 hover:font-bold cursor-pointer;  
    }  
  
    #clearTodosBtn {  
     @apply bg-blue-500 py-2 px-3 lg:py-3 lg:px-4 md:mx-4 mx-3 my-4 text-white rounded-md hover:bg-blue-600 active:scale-95 transition cursor-pointer;  
    }  
  
    #input {  
     @apply cursor-text w-[85vw] sm:w-[75vw] md:w-[55vw] lg:w-[40vw] xl:w-[37vw] 2xl:w-[35vw] mx-auto my-5 block px-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 placeholder-gray-400 focus:outline-black focus:outline-2;
    }  
  </style>  
  <title>Basic To-do list</title>  
</head>  
<body>  
  <input type="text" id="input" placeholder="Add a new to-do">  
  <ul id="todos" style="list-style: none;"></ul>  
  <button id="clearTodosBtn">Clear All Todos</button>  
  <script>  
    const input = document.querySelector("#input");  
    let alertMessage = "Are you sure you want to delete all todos?";
    let todoStorage = ez.getData("todos") ? JSON.parse(ez.getData("todos")) : [];  
  
    if(navigator.language.startsWith("tr")){  
      document.title = "Basit Yapılacaklar Listesi";  
      input.placeholder = "Yeni bir yapılacak ekleyin.";  
      document.querySelector("#clearTodosBtn").textContent = "Tüm Yapılacakları Temizle";  
      alertMessage = "Tüm yapılacakları silmek istediğinizden emin misiniz?";
    }  

    if(todoStorage.length !== 0){  
      todoStorage.forEach(todo => ez.createElement("li",`${todo} <span class="cross">×</span>`,0,0,"ul"));  
    }  
    
    ez.addEventById("input","keydown",e=>{  
      if(e.key === "Enter" && input.value.trim() !== ""){  
        addTodo(input.value);  
        input.value = "";  
      }  
    });  
  
    ez.addEventById("clearTodosBtn","click",()=>{  
      if(document.querySelectorAll("li").length >= 1){  
        if(confirm(alertMessage)){
          ez.removeElementByQuerySelector("ul>li", "all");  
          ez.setData("todos", "[]");  
          input.value = "";  
         } 
      }  
  
    });  
  
    function addTodo(val){ 
      const escapeHTML = str => return str.replace(/</g, "Error").replace(/>/g, "Error");      
      
      ez.createElement("li",`${escapeHTML(val)} <span>×</span>`,0,0,"ul");  
      todoStorage.push(escapeHTML(val));  
      ez.setData("todos", JSON.stringify(todoStorage));  
    }  
     
    addRemoveEventToTodos();  
  
    function addRemoveEventToTodos(){  
      ez.addEventByQuerySelector("ul", "click", e => {  
        if(e.target.tagName.toLowerCase() === "span"){  
       const index = Array.from(e.target.parentElement.parentElement.children).indexOf(e.target.parentElement);  
        todoStorage.splice(index, 1);  
        ez.setData("todos", JSON.stringify(todoStorage));  
        e.target.parentElement.remove();  
        }  
     });  
    }  
  </script>  
</body>  
</html>
